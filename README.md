# FPGA Vocoder

This repository contains a real‑time, multi‑band vocoder implemented on an Intel Cyclone V (5CSEMA5F31C6) FPGA. A Texas Instruments TM4C123GH6PM microcontroller provides high‑speed audio sampling for verification and optional control tasks.

## Key Features

| Feature | Description |
| --- | --- |
| Multi‑band envelope extraction | Eight‑band Hilbert‑based envelope detector generated with MATLAB HDL Coder |
| Streaming FFT/IFFT core | 1 024‑point Radix‑2² SDF FFT pipeline generated with MATLAB HDL Coder and operated at a 48 kHz frame rate |
| Real‑time resynthesis | Carrier synthesis and DAC streaming with end‑to‑end latency of less than 2 ms |
| Fixed‑point implementation | 16‑bit Q1.15 arithmetic throughout the signal chain |
| Modular I/O | SPI‑style interfaces for an AD7908 8‑channel, 1 MSPS ADC and a 16‑bit audio DAC |

## Technologies Used

### Hardware

- Intel Cyclone V 5CSEMA5F31C6 FPGA  
- TI TM4C123GH6PM microcontroller (TivaWare firmware)  
- AD7908 8‑channel, 12‑bit ADC (sample clock generated by the FPGA)  
- 16‑bit parallel or serial audio DAC (tested with PCM56 and MCP4922)

### Languages and HDL

- SystemVerilog and Verilog RTL  
- MATLAB R2023b for algorithm prototyping  
- MATLAB HDL Coder and Fixed‑Point Designer for auto‑generated FFT and envelope modules  
- Embedded C (TivaWare) for the microcontroller firmware

### Tools and Libraries

| Tool | Purpose |
| --- | --- |
| Intel Quartus Prime 20.1 | Synthesis, place‑and‑route, programming |
| ModelSim–Intel Edition | Unit‑level and system‑level simulation |
| MATLAB R2023b | Algorithm design, fixed‑point conversion, HDL code generation |
| TivaWare 2.2.0.295 | Peripheral drivers for TM4C123GH6PM |

## Repository Layout

```
FPGA/                       # Quartus project, RTL and test benches
├─ vocoder/                 # Synthesizable RTL (SystemVerilog)
├─ vocoder_verification/    # ModelSim test‑bench project
│   ├─ envelopeModulation/  # HDL Coder auto‑generated FFT and envelope blocks
│   └─ TM4C123GH6PM/        # Microcontroller firmware used during verification
│
MATLAB/
├─ MATLAB_Concept_Code/     # Floating‑point reference model and plots
└─ MATLAB_CodeGen/          # Fixed‑point conversion and HDL Codegen scripts
```

## Development Workflow

1. Design the algorithm in MATLAB, convert to fixed‑point, and generate synthesizable HDL with HDL Coder.  
2. Perform mixed RTL and behavioural simulation in ModelSim.  
3. Compile in Quartus and close timing
4. Bring‑up hardware, stream test vectors from the microcontroller, and compare DAC output against MATLAB reference results.

## Performance (Cyclone V, 50 MHz core clock)

| Block | Latency (cycles) | fMAX (MHz) | Resource utilisation |
| --- | --- | --- | --- |
| FFT (1 024‑point) | 1 366 | 97 | 6 108 ALMs |
| Envelope detector | 256 | 103 | 4 381 ALMs |
| Carrier DAC interface | 32 | 212 | 196 ALMs |

Figures generated with Quartus Prime 20.1 after timing closure.
